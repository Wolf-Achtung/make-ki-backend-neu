<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>AI Status Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --brand-blue-900:#0B3C73;
    --brand-blue-700:#145DA0;
    --brand-blue-500:#1E88E5;
    --brand-blue-300:#90CAF9;
    --brand-blue-100:#E3F2FD;
    --ink:#111827; --muted:#6B7280; --bg:#FFFFFF; --card:#FAFCFF; --border:#D5E3F7; --accent:#EEF6FF;
  }
  *{box-sizing:border-box}
  body{ margin:0; padding:24px; font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans";
        color:var(--ink); background:var(--bg) }
  h1,h2,h3{ margin:0 0 8px 0; line-height:1.2; color:var(--brand-blue-900) }
  h1{ font-size:28px; border-left:6px solid var(--brand-blue-500); padding-left:10px }
  h2{ font-size:22px; color:var(--brand-blue-700); border-bottom:2px solid var(--brand-blue-300); padding-bottom:4px }
  h3{ font-size:17px; color:var(--brand-blue-700) }
  .section{ margin:20px 0 }
  .card{ background:linear-gradient(180deg, var(--card), #fff); border:1px solid var(--border); border-radius:12px; padding:18px }
  .caption{ color:var(--muted); font-size:12px }
  .vision-card{ background:var(--accent); border:1px dashed var(--brand-blue-300); border-radius:10px; padding:12px }
  .live-box{ background:var(--brand-blue-100); border:1px solid var(--brand-blue-300); border-radius:10px; padding:12px }
  a{ color:var(--brand-blue-700); text-decoration:none; border-bottom:1px dotted var(--brand-blue-300) }
  a:hover{ text-decoration:underline }
  table{ width:100%; border-collapse:collapse; margin-top:8px }
  th,td{ text-align:left; padding:6px 8px; border-bottom:1px solid var(--border) }
  .footer{ margin-top:18px; padding-top:12px; border-top:1px solid var(--border); color:var(--muted); font-size:12px }
</style>
</head>
<body>

  <div class="section">
    <h1>AI Status Report</h1>
    {% if subtitle %}<div class="caption">{{ subtitle }}</div>{% endif %}
  </div>

  {% if exec_summary_html and exec_summary_html|trim %}
  <div class="section">
    <div class="card">
      <h2>Executive summary</h2>
      <div>{{ exec_summary_html|safe }}</div>
    </div>
  </div>
  {% endif %}

  {% if recommendations_html and recommendations_html|trim %}
  <div class="section">
    <div class="card">
      <h2>Recommendations</h2>
      <div>{{ recommendations_html|safe }}</div>
    </div>
  </div>
  {% endif %}

  {% if roadmap_html and roadmap_html|trim or (roadmap_items and roadmap_items|length > 0) %}
  <div class="section">
    <div class="card" style="page-break-before: always;">
      <h2>Roadmap</h2>
      {% if timeline and (timeline.t30 or timeline.t90 or timeline.t365) %}
        <h3>Short term</h3>{% for it in timeline.t30 %}<p>{{ it }}</p>{% endfor %}
        <h3>Mid term</h3>{% for it in timeline.t90 %}<p>{{ it }}</p>{% endfor %}
        <h3>Long term</h3>{% for it in timeline.t365 %}<p>{{ it }}</p>{% endfor %}
      {% elif roadmap_items and roadmap_items|length > 0 %}
        <table>
          <thead><tr><th>Month</th><th>Task</th><th>Owner</th><th>Dependencies</th><th>Benefit</th></tr></thead>
          <tbody>
          {% for item in roadmap_items %}
            <tr>
              <td>{{ item.month or '' }}</td>
              <td>{{ item.task or '' }}</td>
              <td>{{ item.owner or '' }}</td>
              <td>{{ item.dependencies or '' }}</td>
              <td>{{ item.benefit or item.outcome or '' }}</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      {% else %}
        <div>{{ roadmap_html|safe }}</div>
      {% endif %}
    </div>
  </div>
  {% endif %}

  <div class="section">
    <div class="card" style="page-break-before: always;">
      <h2>Funding (selection)</h2>
      {% if foerderprogramme_html and foerderprogramme_html|trim %}
        <div>{{ foerderprogramme_html|safe }}</div>
        <p class="caption">As of: {{ funding_stand or datum }}</p>
      {% elif foerderprogramme_table and foerderprogramme_table|length>0 %}
        <table>
          <thead><tr><th>Programme</th><th>Link</th></tr></thead>
          <tbody>
          {% for p in foerderprogramme_table %}
            <tr>
              <td>{{ p.name }}</td>
              <td>{% if p.link %}<a href="{{ p.link }}">Open</a>{% endif %}</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
        <p class="caption">As of: {{ funding_stand or datum }}</p>
      {% elif dynamic_funding_html and dynamic_funding_html|trim %}
        {{ dynamic_funding_html|safe }}
      {% else %}
        <p><em>No programmes in the data set.</em></p>
      {% endif %}
    </div>
  </div>

  <div class="section">
    <div class="card" style="page-break-before: always;">
      <h2>AI tools &amp; software</h2>
      {% if tools_html and tools_html|trim %}
        <div>{{ tools_html|safe }}</div>
      {% elif tools_table and tools_table|length>0 %}
        <table>
          <thead><tr><th>Tool</th><th>Link</th></tr></thead>
          <tbody>
          {% for t in tools_table %}
            <tr>
              <td>{{ t.name }}</td>
              <td>{% if t.link %}<a href="{{ t.link }}">Website</a>{% endif %}</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p><em>Tool list will be added dynamically.</em></p>
      {% endif %}
    </div>
  </div>

  {% if live_updates_html and live_updates_html|trim %}
  <div class="section">
    <div class="card live-box">
      <h2>{{ live_updates_title }}</h2>
      <div>{{ live_updates_html|safe }}</div>
    </div>
  </div>
  {% endif %}

  {% if compliance_html and compliance_html|trim %}
  <div class="section">
    <div class="card" style="page-break-before: always;">
      <h2>Compliance</h2>
      <div>{{ compliance_html|safe }}</div>
    </div>
  </div>
  {% endif %}

  {% if vision_html %}
  <div class="section">
    <div class="card" style="page-break-before: always;">
      <h2>Vision</h2>
      <div class="vision-card">{{ vision_html|safe }}</div>
    </div>
  </div>
  {% endif %}

  {% if (gamechanger_html and gamechanger_html|trim) or (gamechanger_blocks and gamechanger_blocks|trim) %}
  <div class="section">
    <div class="card" style="page-break-before: always;">
      <h2>Innovation &amp; gamechanger</h2>
      {{ gamechanger_html|safe }}
    </div>
  </div>
  {% endif %}

  {% if ueber_mich_html and ueber_mich_html|trim %}
  <div class="section">
    <div class="card">
      <h2>Service & proof</h2>
      <div>{{ ueber_mich_html|safe }}</div>
    </div>
  </div>
  {% endif %}

  {% if glossary_html and glossary_html|trim %}
  <div class="section">
    <div class="card">
      <h2>Glossary</h2>
      <div>{{ glossary_html|safe }}</div>
    </div>
  </div>
  {% endif %}

  <div class="section">
    <div class="card">
      <div style="margin-top:.2rem;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--brand-blue-100);">
        <b>Your opinion matters:</b>
        <a href="https://make.ki-sicherheit.jetzt/feedback/feedback.html?variant={{ unternehmensgroesse|urlencode }}&version={{ datum|default('0.9') }}">Give feedback (short)</a>
      </div>
    </div>
  </div>

  <div class="footer">
    <div style="display:flex;align-items:center;gap:12px">
      {% if logo_tuev %}<img src="{{ logo_tuev }}" alt="TÜV" style="height:18px">{% endif %}
      {% if logo_euai %}<img src="{{ logo_euai }}" alt="EU AI" style="height:18px">{% endif %}
      {% if logo_dsgvo %}<img src="{{ logo_dsgvo }}" alt="DSGVO" style="height:18px">{% endif %}
      <span>© 2025 KI‑Sicherheit.jetzt – GDPR & EU AI Act‑ready – Wolf Hohl</span>
    </div>
    <div style="margin-top:4px">{{ footer_text|safe }}</div>
  </div>

</body>
</html>
