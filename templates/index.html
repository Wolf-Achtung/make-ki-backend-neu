<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>KI-Check</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; }
        input, select, textarea, button { display: block; margin-bottom: 1rem; width: 300px; }
    </style>
</head>
<body>
    <h1>KI-Check für Unternehmen</h1>
    <form id="briefingForm">
        <input type="text" name="name" placeholder="Name" required>
        <input type="email" name="email" placeholder="E-Mail" required>
        <input type="text" name="branche" placeholder="Branche" required>
        <select name="selbststaendig">
            <option value="">Selbstständig?</option>
            <option value="ja">Ja</option>
            <option value="nein">Nein</option>
        </select>
        <input type="text" name="massnahme" placeholder="Geplante Maßnahme" required>
        <input type="text" name="bereich" placeholder="Geplanter Einsatzbereich" required>
        <textarea name="ziel" placeholder="Was möchten Sie mit KI erreichen?"></textarea>
        <button type="submit">Jetzt prüfen lassen</button>
    </form>
    <div id="result"></div>

    <script>
    document.querySelector("#briefingForm").addEventListener("submit", async function(event) {
        event.preventDefault();
        const button = this.querySelector("button");
        button.disabled = true;
        button.innerText = "Analyse läuft...";

        const data = {
            name: this.name.value,
            email: this.email.value,
            branche: this.branche.value,
            selbststaendig: this.selbststaendig.value,
            massnahme: this.massnahme.value,
            bereich: this.bereich.value,
            ziel: this.ziel.value
        };

        try {
            const response = await fetch("/briefing", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify(data)
            });
            const result = await response.json();
            document.querySelector("#result").innerText = result.briefing;
        } catch (error) {
            console.error("Fehler:", error);
            document.querySelector("#result").innerText = "Es gab ein Problem bei der Analyse.";
        }

        button.disabled = false;
        button.innerText = "Jetzt prüfen lassen";
    });
    </script>
</body>
</html>
